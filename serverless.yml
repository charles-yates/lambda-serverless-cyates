service: lambda-serverless-cyates

provider:
  name: aws
  runtime: nodejs6.10
  stage: demo
  region: us-east-1
  profile: serverless-admin
  iamRoleStatements:
    - Effect: "Allow"
      Action:
        - "apigateway:GET"
      Resource:
        - "arn:aws:apigateway:${self:provider.region}::/restapis*"

plugins:
  - serverless-plugin-typescript

package:
  include:
    src/**/!(*.spec).js
  exclude:
    - node_modules/**/*

functions:
  getMovie:
    handler: src/api/movies/movies.getMovie
    description: Returns a single movie.

    events:
      - http:
          path: movies/{id}
          method: get
          cors: true
          request:
            parameters:
              paths:
                id: true

custom:
  output:
    file: .serverless/output.json
